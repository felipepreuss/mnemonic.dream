[gd_scene load_steps=17 format=3 uid="uid://bdhm1re0so86v"]

[ext_resource type="Material" uid="uid://dgicjbtbf5vt3" path="res://Assets/postprocessing.tres" id="1_dkb5v"]
[ext_resource type="Script" uid="uid://dwru7rmwvq87b" path="res://Script/level_6.gd" id="1_dwax7"]
[ext_resource type="PackedScene" uid="uid://ddytulff8t04j" path="res://Scenes/pause.tscn" id="1_vl8t7"]
[ext_resource type="PackedScene" uid="uid://c0q52hnxwbxdo" path="res://Scenes/player.tscn" id="2_bj0im"]
[ext_resource type="Shader" uid="uid://drswsnula6iy2" path="res://Scenes/skybox.gdshader" id="5_dst8n"]
[ext_resource type="PackedScene" uid="uid://kpfwdeujk13u" path="res://Scenes/guardian_enemy.tscn" id="5_fgept"]
[ext_resource type="PackedScene" uid="uid://0x5xhls7hmwi" path="res://Scenes/spectre_enemy.tscn" id="6_fgept"]
[ext_resource type="PackedScene" uid="uid://ch6wku1kvhqvk" path="res://Scenes/shooter_enemy.tscn" id="7_l57pf"]
[ext_resource type="PackedScene" uid="uid://dxj11a6cbsieu" path="res://Scenes/him.tscn" id="9_0cdk7"]
[ext_resource type="PackedScene" uid="uid://b1gyytpr1qkqn" path="res://Assets/home.glb" id="10_fgept"]

[sub_resource type="BoxShape3D" id="BoxShape3D_0cdk7"]
size = Vector3(7.692478, 4.0478516, 19.506195)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0cdk7"]
shader = ExtResource("5_dst8n")
shader_parameter/sky_color = Color(0.03, 0.05, 0.11, 1)
shader_parameter/star_base_color = Color(0.8, 1, 0.3, 1)
shader_parameter/star_hue_offset = 0.6
shader_parameter/star_intensity = 0.08
shader_parameter/star_twinkle_speed = 0.8
shader_parameter/star_twinkle_intensity = 0.2
shader_parameter/layer_scale = 20.0
shader_parameter/layer_scale_step = 10.0
shader_parameter/layers_count = 3

[sub_resource type="Sky" id="Sky_oopfi"]
sky_material = SubResource("ShaderMaterial_0cdk7")

[sub_resource type="Environment" id="Environment_l57pf"]
background_mode = 2
sky = SubResource("Sky_oopfi")
sky_custom_fov = 164.2
tonemap_mode = 2
volumetric_fog_enabled = true
volumetric_fog_density = 0.09
volumetric_fog_albedo = Color(0.329412, 0.498039, 0.909804, 1)
volumetric_fog_emission = Color(0.12549, 0, 0, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_dwax7"]
size = Vector3(8.45367, 3.98425, 1)

[sub_resource type="NavigationMesh" id="NavigationMesh_l57pf"]
vertices = PackedVector3Array(-43.04638, 1.1523657, -39.183792, -42.79638, 1.1523657, -73.43379, -67.54638, 1.1523657, -73.43379, -67.54638, 1.1523657, -39.183792, -41.29638, 0.9023657, -17.683792, -21.79638, 0.9023657, -17.683792, -21.54638, 0.9023657, -19.933792, -41.29638, 1.1523657, -38.933792, -2.546379, 0.9023657, -19.933792, -2.546379, 1.1523657, -73.43379, -0.5463791, 0.9023657, -19.933792, -0.2963791, 1.1523657, -18.933792, 1.9536209, 1.1523657, -18.933792, 2.203621, 0.9023657, -19.933792, 4.203621, 1.1523657, -73.43379, 4.203621, 0.9023657, -19.933792, 22.20362, 0.9023657, -19.933792, 22.45362, 0.9023657, -19.433792, 37.95362, 0.9023657, -19.433792, 37.95362, 1.1523657, -38.933792, 39.45362, 1.1523657, -73.43379, 39.70362, 1.1523657, -39.183792, 94.95362, 1.1523657, -39.433792, 94.95362, 1.1523657, -73.43379, 22.20362, 0.9023657, 20.816208, 37.95362, 0.9023657, 21.066208, -20.79638, 2.4023657, 21.816208, -3.546379, 2.4023657, 21.816208, -20.54638, 2.4023657, 21.316208, -20.29638, 2.4023657, -18.433792, -1.2963791, 2.4023657, -18.683792, -20.79638, 2.4023657, -18.933792, -0.04637909, 0.9023657, -14.683792, 0.20362091, 1.1523657, -13.683792, 1.2036209, 1.1523657, -13.683792, 1.4536209, 0.9023657, -14.683792, -0.5463791, 0.9023657, -17.683792, -2.546379, 0.9023657, -17.683792, -2.546379, 0.9023657, -14.683792, 2.203621, 0.9023657, -17.683792, 13.703621, 0.9023657, -14.683792, 13.703621, 0.9023657, -17.683792, 20.95362, 2.4023657, 10.816208, 20.45362, 2.4023657, 21.316208, 21.20362, 2.4023657, 21.566208, 21.45362, 2.4023657, 6.816208, 21.45362, 2.4023657, -18.183792, 20.95362, 2.4023657, -18.183792, -41.29638, 0.9023657, 20.566208, -21.79638, 0.9023657, 20.566208, -19.29638, 0.9023657, -13.183792, -16.54638, 1.1523657, -12.933792, -16.29638, 0.9023657, -14.683792, -19.29638, 0.9023657, -17.683792, 15.953621, 0.9023657, -14.433792, 19.95362, 0.9023657, -17.683792, 15.953621, 0.9023657, 15.816208, 15.453621, 0.9023657, 16.066208, 15.453621, 0.9023657, 20.566208, 19.70362, 0.9023657, 20.316208, 14.953621, 5.4023657, -14.433792, 14.453621, 5.4023657, -14.433792, 14.453621, 5.6523657, -13.433792, 14.953621, 5.6523657, 15.316208, 14.703621, 5.6523657, 15.816208, -16.29638, 6.1523657, -13.433792, -16.29638, 6.1523657, 15.816208, -0.058280945, 10.652366, 15.816208, -0.18923187, 10.652366, -13.433792, 0.9505768, 10.652366, -0.4288864, -0.56920624, 10.652366, 1.0688858, 0.9310303, 10.652366, 2.588623, 0.92874146, 10.652366, -12.448921, 0.9528656, 10.652366, 14.558662, 9.93248, 7.1523657, 11.5570755, -12.296379, 1.1523657, 1.5662079, -12.046379, 1.1523657, 2.566208, -11.046379, 1.1523657, 2.566208, -10.796379, 1.1523657, 1.5662079, -14.546379, 1.1523657, -12.683792, 4.953621, 1.1523657, -8.933792, 4.953621, 1.1523657, -10.433792, 1.4536209, 1.1523657, -12.683792, -0.04637909, 1.1523657, -12.683792, 4.953621, 1.1523657, 0.5662079, 5.953621, 1.1523657, 0.3162079, 5.953621, 1.1523657, -0.6837921, 4.953621, 1.1523657, -0.9337921, -3.046379, 1.1523657, 1.5662079, -1.2963791, 1.1523657, 1.5662079, 4.953621, 1.1523657, -12.683792, 5.953621, 1.1523657, -9.183792, 5.953621, 1.1523657, -10.183792, 4.953621, 1.1523657, 1.5662079, -14.546379, 1.1523657, 1.5662079, -2.796379, 1.1523657, 2.566208, -1.5463791, 1.1523657, 2.566208, -19.54638, 0.9023657, 13.816208, -16.54638, 1.1523657, 13.816208, -5.796379, 5.6523657, 15.066208, -2.546379, 5.6523657, 15.066208, -2.296379, 5.6523657, 13.566208, 2.453621, 5.6523657, 13.566208, 2.703621, 5.6523657, 15.066208, 6.453621, 5.6523657, 15.066208, 6.453621, 5.6523657, -11.683792, 3.453621, 5.6523657, -11.683792, 2.453621, 5.6523657, -11.933792, 2.203621, 5.6523657, -12.683792, -5.796379, 5.6523657, -12.683792, 7.203621, 1.1523657, -8.933792, 7.203621, 1.1523657, -10.433792, 13.953621, 1.1523657, -5.683792, 13.953621, 1.1523657, -12.683792, 7.203621, 1.1523657, -12.683792, 7.203621, 1.1523657, -5.683792, 7.203621, 1.1523657, 0.5662079, 7.203621, 1.1523657, -0.9337921, 7.203621, 1.1523657, 14.066208, 13.953621, 1.1523657, 14.066208, 13.953621, 1.1523657, -3.683792, 7.203621, 1.1523657, -3.683792, -10.796379, 1.1523657, 3.566208, -12.296379, 1.1523657, 3.566208, -14.546379, 1.1523657, 14.066208, -6.546379, 1.1523657, 14.066208, -6.546379, 1.1523657, 3.566208, -14.546379, 1.1523657, 3.566208, -1.2963791, 1.1523657, 3.566208, -3.046379, 1.1523657, 3.566208, -4.546379, 1.1523657, 14.066208, 4.953621, 1.1523657, 14.066208, 4.953621, 1.1523657, 3.566208, -4.546379, 1.1523657, 3.566208, -16.29638, 1.1523657, 16.066208, -19.54638, 0.9023657, 20.566208, -21.29638, 0.9023657, 40.316208, -21.29638, 0.9023657, 22.816208, -21.79638, 0.9023657, 22.566208, -41.29638, 0.9023657, 40.316208, 21.95362, 0.9023657, 22.566208, 20.70362, 0.9023657, 40.316208, 37.95362, 0.9023657, 40.316208, 20.45362, 0.9023657, 22.566208)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(6, 7, 8), PackedInt32Array(8, 7, 1), PackedInt32Array(8, 1, 9), PackedInt32Array(7, 0, 1), PackedInt32Array(11, 10, 12), PackedInt32Array(12, 10, 13), PackedInt32Array(13, 10, 9), PackedInt32Array(13, 9, 14), PackedInt32Array(10, 8, 9), PackedInt32Array(14, 15, 13), PackedInt32Array(17, 16, 18), PackedInt32Array(18, 16, 19), PackedInt32Array(16, 15, 19), PackedInt32Array(19, 15, 20), PackedInt32Array(20, 15, 14), PackedInt32Array(19, 20, 21), PackedInt32Array(22, 21, 23), PackedInt32Array(23, 21, 20), PackedInt32Array(17, 18, 24), PackedInt32Array(24, 18, 25), PackedInt32Array(28, 27, 26), PackedInt32Array(31, 30, 29), PackedInt32Array(28, 26, 29), PackedInt32Array(29, 26, 31), PackedInt32Array(33, 32, 34), PackedInt32Array(34, 32, 35), PackedInt32Array(37, 36, 38), PackedInt32Array(38, 36, 32), PackedInt32Array(12, 39, 11), PackedInt32Array(11, 39, 36), PackedInt32Array(36, 39, 35), PackedInt32Array(36, 35, 32), PackedInt32Array(41, 40, 39), PackedInt32Array(39, 40, 35), PackedInt32Array(43, 42, 44), PackedInt32Array(44, 42, 45), PackedInt32Array(46, 45, 47), PackedInt32Array(47, 45, 42), PackedInt32Array(4, 5, 48), PackedInt32Array(48, 5, 49), PackedInt32Array(51, 50, 52), PackedInt32Array(52, 50, 53), PackedInt32Array(38, 52, 37), PackedInt32Array(37, 52, 53), PackedInt32Array(40, 41, 54), PackedInt32Array(54, 41, 55), PackedInt32Array(57, 56, 58), PackedInt32Array(58, 56, 59), PackedInt32Array(54, 55, 56), PackedInt32Array(56, 55, 59), PackedInt32Array(61, 60, 62), PackedInt32Array(62, 60, 63), PackedInt32Array(65, 70, 66), PackedInt32Array(66, 70, 67), PackedInt32Array(67, 73, 64), PackedInt32Array(64, 74, 63), PackedInt32Array(63, 74, 62), PackedInt32Array(62, 72, 68), PackedInt32Array(68, 70, 65), PackedInt32Array(70, 73, 67), PackedInt32Array(73, 74, 64), PackedInt32Array(74, 69, 62), PackedInt32Array(72, 69, 68), PackedInt32Array(62, 69, 72), PackedInt32Array(68, 69, 70), PackedInt32Array(70, 71, 73), PackedInt32Array(73, 71, 74), PackedInt32Array(74, 71, 69), PackedInt32Array(69, 71, 70), PackedInt32Array(76, 75, 77), PackedInt32Array(77, 75, 78), PackedInt32Array(78, 75, 79), PackedInt32Array(81, 80, 82), PackedInt32Array(82, 80, 83), PackedInt32Array(85, 84, 86), PackedInt32Array(86, 84, 87), PackedInt32Array(87, 84, 89), PackedInt32Array(87, 89, 88), PackedInt32Array(82, 90, 81), PackedInt32Array(91, 80, 92), PackedInt32Array(92, 80, 81), PackedInt32Array(84, 93, 89), PackedInt32Array(34, 82, 33), PackedInt32Array(33, 82, 83), PackedInt32Array(75, 94, 79), PackedInt32Array(95, 88, 96), PackedInt32Array(96, 88, 89), PackedInt32Array(80, 87, 83), PackedInt32Array(83, 87, 88), PackedInt32Array(83, 88, 78), PackedInt32Array(83, 78, 79), PackedInt32Array(51, 98, 50), PackedInt32Array(50, 98, 97), PackedInt32Array(101, 100, 99), PackedInt32Array(103, 102, 104), PackedInt32Array(104, 102, 106), PackedInt32Array(104, 106, 105), PackedInt32Array(109, 108, 107), PackedInt32Array(107, 106, 109), PackedInt32Array(109, 106, 101), PackedInt32Array(109, 101, 99), PackedInt32Array(106, 102, 101), PackedInt32Array(92, 111, 91), PackedInt32Array(91, 111, 110), PackedInt32Array(111, 113, 110), PackedInt32Array(110, 113, 112), PackedInt32Array(111, 114, 113), PackedInt32Array(112, 115, 110), PackedInt32Array(86, 117, 85), PackedInt32Array(85, 117, 116), PackedInt32Array(118, 116, 119), PackedInt32Array(119, 116, 120), PackedInt32Array(117, 121, 120), PackedInt32Array(116, 117, 120), PackedInt32Array(77, 122, 76), PackedInt32Array(76, 122, 123), PackedInt32Array(123, 122, 124), PackedInt32Array(126, 125, 122), PackedInt32Array(122, 125, 124), PackedInt32Array(124, 127, 123), PackedInt32Array(96, 128, 95), PackedInt32Array(95, 128, 129), PackedInt32Array(129, 128, 130), PackedInt32Array(132, 131, 128), PackedInt32Array(128, 131, 130), PackedInt32Array(130, 133, 129), PackedInt32Array(98, 134, 97), PackedInt32Array(97, 134, 135), PackedInt32Array(57, 58, 134), PackedInt32Array(134, 58, 135), PackedInt32Array(137, 136, 138), PackedInt32Array(138, 136, 139), PackedInt32Array(138, 139, 48), PackedInt32Array(48, 49, 138), PackedInt32Array(24, 25, 140), PackedInt32Array(140, 25, 142), PackedInt32Array(140, 142, 141), PackedInt32Array(141, 143, 140), PackedInt32Array(137, 143, 136), PackedInt32Array(136, 143, 141)]

[node name="Node3D" type="Node3D"]
script = ExtResource("1_dwax7")

[node name="Pause" parent="." instance=ExtResource("1_vl8t7")]

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
material = ExtResource("1_dkb5v")
offset_right = 1152.0
offset_bottom = 648.0
metadata/_edit_use_anchors_ = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
audio_listener_enable_3d = true
size = Vector2i(1152, 648)
render_target_update_mode = 4

[node name="boss_area" type="Area3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.584381, 1.360035, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/boss_area"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.20604134, 1.5239258, 4.922043)
shape = SubResource("BoxShape3D_0cdk7")

[node name="player" parent="SubViewportContainer/SubViewport" node_paths=PackedStringArray("boss") instance=ExtResource("2_bj0im")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.02857, 2.27353, -28.7161)
boss = NodePath("../Him enemy")

[node name="WorldEnvironment" type="WorldEnvironment" parent="SubViewportContainer/SubViewport"]
environment = SubResource("Environment_l57pf")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(-0.866024, -0.433016, 0.250001, 0, 0.499998, 0.866026, -0.500003, 0.749999, -0.43301, 0, 0, 0)
light_bake_mode = 1
shadow_enabled = true

[node name="guardian_enemy" parent="SubViewportContainer/SubViewport" node_paths=PackedStringArray("player") instance=ExtResource("5_fgept")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.271738, 1.7774, -8.55079)
player = NodePath("../player")

[node name="spectre_enemy" parent="SubViewportContainer/SubViewport" node_paths=PackedStringArray("player") instance=ExtResource("6_fgept")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.8473, 1.77019, -9.65393)
player = NodePath("../player")

[node name="spectre_enemy2" parent="SubViewportContainer/SubViewport" node_paths=PackedStringArray("player") instance=ExtResource("6_fgept")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.9904, 1.77019, 5.26497)
player = NodePath("../player")

[node name="Shooter Enemy" parent="SubViewportContainer/SubViewport" node_paths=PackedStringArray("player") instance=ExtResource("7_l57pf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0910316, 2.30877, 9.31943)
player = NodePath("../player")

[node name="Him enemy" parent="SubViewportContainer/SubViewport" node_paths=PackedStringArray("player") instance=ExtResource("9_0cdk7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.6668, 1.01582, 11.7204)
player = NodePath("../player")

[node name="OmniLight3D" type="OmniLight3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.808, 2.27093, 5.40285)
light_color = Color(1, 0, 1, 1)

[node name="OmniLight3D2" type="OmniLight3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.60855, 2.27093, 12.5972)
light_color = Color(1, 0, 1, 1)

[node name="OmniLight3D3" type="OmniLight3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.13178, 2.27093, -3.85821)
light_color = Color(1, 0, 1, 1)

[node name="OmniLight3D3" type="OmniLight3D" parent="SubViewportContainer/SubViewport/OmniLight3D3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.8418, -0.327361, 14.1561)
light_color = Color(1, 0, 1, 1)

[node name="OmniLight3D4" type="OmniLight3D" parent="SubViewportContainer/SubViewport/OmniLight3D3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.8584, -0.327361, 14.1561)
light_color = Color(1, 0, 1, 1)

[node name="level_trans" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -19.9267)

[node name="CollisionShape3D" type="CollisionShape3D" parent="level_trans"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.984222, 1.49213, 1.04115)
shape = SubResource("BoxShape3D_dwax7")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00294495, 0.00392342, -0.00468159)
navigation_mesh = SubResource("NavigationMesh_l57pf")

[node name="home" parent="NavigationRegion3D" instance=ExtResource("10_fgept")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00294495, -0.00392342, 0.00468159)

[connection signal="body_entered" from="SubViewportContainer/SubViewport/boss_area" to="SubViewportContainer/SubViewport/player" method="_on_boss_area_body_entered"]
[connection signal="body_entered" from="level_trans" to="." method="_on_level_trans_body_entered"]
